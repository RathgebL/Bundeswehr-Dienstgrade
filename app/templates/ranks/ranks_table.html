{% extends "base/base.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles/layouts/_tables.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles/pages/ranks_table.css') }}">
{% endblock %}

{% block content %}
<div class="table-page page--wide">
  <h1 class="table-page__title">Dienstgrad-Tabelle</h1>

  <!-- Filter -->
  <form method="get" action="{{ url_for('ranks.ranks_table') }}" class="ranks__filter">
    <label for="branch">Truppenteil:</label>
    <select name="branch" id="branch" class="select" onchange="this.form.submit()">
      {% for b in branches %}
      <option value="{{ b }}" {% if selected_branch == b %}selected{% endif %}>{{ b }}</option>
      {% endfor %}
    </select>
  </form>

  <!-- Tabelle -->
  <div class="table-wrapper">
    <table class="table ranks__table">
      <thead>
        <tr>
          <th>Bild</th>
          <th>Dienstgrad</th>
          <th>Abkürzung</th>
          <th>NATO-Code</th>
          <th>Ranggruppe</th>
          <th>Beschreibung</th>
        </tr>
      </thead>
      <tbody>
        {% for rank in ranks %}
        <tr>
          <td><img src="{{ url_for('static', filename='images/' + rank.image_filename) }}" alt="{{ rank.title }}"></td>
          <td class="table__highlight">{{ rank.title }}</td>
          <td>{{ rank.abbreviation or "–" }}</td>
          <td>{{ rank.level_code or "–" }}</td>
          <td>{{ rank.rank_group or rank.rank_type or "–" }}</td>
          <td>{{ rank.description or "Keine Beschreibung" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Zurück-Button -->
  <div class="btn-back-container">
    <a href="{{ url_for('ranks.ranks_menu') }}" class="btn btn--secondary">Zurück zum Menü</a>
  </div>
</div>
{% endblock %}