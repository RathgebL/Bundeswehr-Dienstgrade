{% extends "base/base.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/nato_quiz.css') }}">
{% endblock %}

{% block content %}
<div class="nato-quiz page-box">
  <h1 class="nato-quiz__title heading-primary">NATO-Alphabet Quiz</h1>

  <div class="nato-quiz__letter-box">
    <h1 class="nato-quiz__letter">{{ letter }}</h1>
  </div>

  <div class="nato-quiz__options">
    {% for opt in options %}
    <button
      data-value="{{ opt }}"
      onclick="checkAnswer('{{ opt }}', '{{ correct }}')"
      class="nato-quiz__button"
    >
      {{ opt }}
    </button>
    {% endfor %}
  </div>

  <p id="feedback" class="nato-quiz__feedback"></p>

  <div class="nato-quiz__actions">
    <a href="{{ url_for('nato.nato_menu') }}" class="nato-quiz__next nato-quiz__back">
      Zurück zum Menü
    </a>

    <a href="{{ url_for('nato.nato_quiz') }}" id="next-btn" class="nato-quiz__next d-none">
      Nächste Frage
    </a>
  </div>
</div>

<script>
function checkAnswer(selected, correct) {
  const buttons = document.querySelectorAll("button[data-value]");
  buttons.forEach(btn => btn.classList.add("is-locked"));

  const feedback = document.getElementById("feedback");

  if (selected === correct) {
    feedback.innerText = "Richtig!";
    document.querySelector(`button[data-value='${selected}']`).classList.add("nato-quiz__button--correct");
  } else {
    feedback.innerText = "Falsch!";
    document.querySelector(`button[data-value='${selected}']`).classList.add("nato-quiz__button--wrong");
    document.querySelector(`button[data-value='${correct}']`).classList.add("nato-quiz__button--correct");
  }

  document.getElementById("next-btn").classList.remove("d-none");
}
</script>
{% endblock %}