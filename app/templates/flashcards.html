{% extends "base.html" %}

{% block content %}
<div class="flashcards">
    <h1 class="flashcards-title">Karteikarten</h1>

    <div id="flashcard" class="flashcard-container">
        <div class="card-flip" onclick="flipCard()">
            <div class="card-face card-front">
                <img id="rank-image" src="{{ url_for('static', filename='images/' + ranks[0].image_filename) }}"
                     alt="{{ ranks[0].title }}" class="rank-image">
                <p class="flip-hint">Klick zum Umdrehen</p>
            </div>
            <div class="card-face card-back">
                <h4 id="rank-title">{{ ranks[0].title }}</h4>

                <div id="rank-meta" class="rank-meta-clean">
                    <p id="rank-abbr">{{ ranks[0].abbreviation or "-" }}</p>
                    <p id="rank-group">{{ ranks[0].rank_group or ranks[0].rank_type or "-" }}</p>
                    <p id="rank-nato">{{ ranks[0].level_code or "-" }}</p>
                </div>

                <p id="rank-desc" class="rank-desc">{{ ranks[0].description }}</p>
            </div>
        </div>
    </div>

    <div class="next-btn-wrapper">
        <button class="btn-next" onclick="nextCard()">NÃ¤chste Karte</button>
    </div>
</div>

<script>
const ranks = {{ ranks|tojson|safe }};
let currentIndex = 0;

const flipContainer = document.querySelector(".card-flip");
const img = document.getElementById("rank-image");
const title = document.getElementById("rank-title");
const desc = document.getElementById("rank-desc");

function flipCard() {
    flipContainer.classList.toggle("flipped");
}

function nextCard() {
    flipContainer.classList.remove("flipped");
    currentIndex = (currentIndex + 1) % ranks.length;
    const rank = ranks[currentIndex];
    img.src = `/static/images/${rank.image_filename}`;
    img.alt = rank.title;
    title.innerText = rank.title;
    desc.innerText = rank.description;
}
</script>
{% endblock %}